{% extends 'base.html' %}
{% block extra_head %}
    <link href="{{ STATIC_URL }}django_facebook/css/facebook.css" type="text/css" rel="stylesheet" media="all" />
{% endblock %}

{% block content %}
{% if not user.is_authenticated %}
    <form action="{% url 'facebook_connect' %}?facebook_login=1" method="post">
        <input type="hidden" value="{{ request.path }}" name="next" />
        <input type="hidden" value="{{ request.path }}" name="register_next" />
        <input type="hidden" value="{{ request.path }}" name="error_next" />
        {% csrf_token %}
        <input onclick="F.connect(this.parentNode); return false;" type="image" src="{{ STATIC_URL }}django_facebook/images/facebook_login.png" />
    </form>
{% else %}
    <h1>Welcome {{ user }}</h1><a href="{% url 'auth_logout' %}?next={{ request.path|urlencode }}">logout</a><br />

    <table id="rounded-corner">
        <tr>
            <td>First Name:</td><td>{{ user.first_name }}</td>
        </tr>
        <tr>
            <td>Last Name:</td><td>{{ user.last_name }}</td>
        </tr>
        <tr>
            <td>Gender:</td><td>{{ user.profile_or_self.gender }}</td>
        </tr>
        <tr>
            <td>About me:</td><td>{{ user.profile_or_self.about_me }}</td>
        </tr>
        <tr>
            <td>Facebook profile url:</td><td>{{ user.profile_or_self.facebook_profile_url }}</td>
        </tr>
        <tr>
            <td>Facebook ID:</td><td>{{ user.profile_or_self.facebook_id }}</td>
        </tr>
        <tr>
            <td>Date of Birth:</td><td>{{ user.profile_or_self.date_of_birth }}</td>
        </tr>
        <tr>
            <td>Website Url:</td><td>{{ user.profile_or_self.website_url }}</td>
        </tr>
        {% if user.profile_or_self.image %}
        <tr>
            <td>Local Image:</td><td><img src="{{ user.profile_or_self.image.url }}" title="local copy" /></td>
        </tr>
        {% endif %}
        <tr>
            <td>Hotlinked Image:</td><td><img src="http://graph.facebook.com/{{ user.profile_or_self.facebook_id }}/picture?type=large" title="facebook stored image" /><br /></td>
        </tr>
        <tr>
            <td>Likes:</td>
            <td>
                <ul>
                {% for like in user.profile_or_self.likes|slice:":5" %}
                    <li>{{ like.name }}</li>
                {% endfor %}
                </ul>
            </td>
        </tr>
        <tr>
            <td>Friends:</td>
            <td>
                <ul>
                {% for friend in user.profile_or_self.friends %}
                    <li>{{ friend.name }}</li>
                {% endfor %}
                </ul>
            </td>
        </tr>
    </table>
{% endif %} 

{% endblock %}

{% include 'django_facebook/_facebook_js.html' %}